import { getCompatibleVersions } from 'baseline-browser-mapping'

// Update on each major release
const targetDate = '2025-05-01'

// https://esbuild.github.io/api/#target
const esbuildSupportedBrowsers = new Set([
  'chrome',
  'edge',
  'firefox',
  'safari',
])

const results = getCompatibleVersions({
  widelyAvailableOnDate: targetDate,
})

const esbuildTargets = results
  .filter((target) => esbuildSupportedBrowsers.has(target.browser))
  .map((target) => `${target.browser}${target.version}`)

console.log('ESBuild Targets:', esbuildTargets)
- Safari >=16
- Firefox >=104
For production builds, Vite by default targets [Baseline](https://web-platform-dx.github.io/web-features/) Widely Available browsers. These are browsers that were released at least 2.5 years ago. The target can be lowered via configuration. Additionally, legacy browsers can be supported via the official [@vitejs/plugin-legacy](https://github.com/vitejs/vite/tree/main/packages/plugin-legacy). See the [Building for Production](./build) section for more details.
- Edge >=107
- Chrome >=107
import {
  ESBUILD_BASELINE_WIDELY_AVAILABLE_TARGET,
  METADATA_FILENAME,
} from '../constants'
  ESBUILD_BASELINE_WIDELY_AVAILABLE_TARGET,
Browser compatibility target for the final bundle. The default value is a Vite special value, `'baseline-widely-available'`, which targets browsers that are included in the [Baseline](https://web-platform-dx.github.io/web-features/) Widely Available on 2025-05-01. Specifically, it is `['chrome107', 'edge107', 'firefox104', 'safari16']`.
<!-- Search for the `ESBUILD_BASELINE_WIDELY_AVAILABLE_TARGET` constant for more information -->
- **Default:** `'baseline-widely-available'`
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
By default, the production bundle assumes a modern browser that is included in the [Baseline](https://web-platform-dx.github.io/web-features/) Widely Available targets. The default browser support range is:
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "target": "ES2022",
    "target": "ES2022",
    "target": "ES2022",
    "target": "ES2022",
    "target": "ES2022",
    "target": "ES2022",
    "target": "ES2022",
# 빌드 옵션 {#build-options}

기본적으로, [모듈 사전로드 폴리필](https://guybedford.com/es-module-preloading-integrity#modulepreload-polyfill)이 자동으로 주입됩니다. 폴리필은 각 `index.html` 엔트리의 프록시 모듈에 자동 주입됩니다. 빌드가 `build.rollupOptions.input`을 통해 HTML이 아닌 커스텀 엔트리를 사용하도록 설정된 경우, 커스텀 엔트리에 직접 폴리필을 가져와야 합니다:
```js
  ESBUILD_BASELINE_WIDELY_AVAILABLE_TARGET,
import 'vite/modulepreload-polyfill'


폴리필은 `{ polyfill: false }`를 사용하여 비활성 할 수 있습니다.

각 동적 가져오기를 위한 사전 로드되는 청크 목록은 Vite에서 산출합니다. 기본적으로, 이러한 디펜던시를 로드할 때 `base`를 포함하는 하나의 절대경로가 사용됩니다. `base`가 상대적인 경우 (`''` or `'./'`), 절대 경로가 최종 배포되는 base에 의존하지 않도록 `import.meta.url`이 런타임에 사용됩니다.

디펜던시 목록 및 그 경로에 대한 세밀한 제어를 위해 `resolveDependencies` 함수를 사용한 실험적인 지원사항이 있습니다. [이 곳에 피드백을 남겨주세요](https://github.com/vitejs/vite/discussions/13841). `ResolveModulePreloadDependenciesFn` 유형의 함수가 그것입니다:

```ts
type ResolveModulePreloadDependenciesFn = (
  url: string,
/**
 * The browser versions that are included in the Baseline Widely Available on 2025-05-01.
 *
 * This value would be bumped on each major release of Vite.
 *
 * The value is generated by `pnpm generate-target` script.
 */
export const ESBUILD_BASELINE_WIDELY_AVAILABLE_TARGET = [
  'chrome107',
  'edge107',
  'firefox104',
  'safari16',
  deps: string[],
    "generate-target": "tsx scripts/generateTarget.ts",
  context: {
    hostId: string
    hostType: 'html' | 'js'
  },
) => string[]
```

`resolveDependencies` 함수는 각 동적 임포트에 대해, 의존하는 청크 목록과 함께 호출됩니다. 진입점 HTML 파일에 임포트된 청크에 대해서도 호출됩니다. 필터링되거나 더 많은 디펜던시가 존재하는 새로운 디펜던시 배열을 반환할 수 있으며, 경로도 수정할 수 있습니다. `deps` 경로는 `build.outDir`을 기준으로 하며, 반환 값도 `build.outDir`에 대한 상대 경로여야 합니다.
   * Default: 'baseline-widely-available' - transpile targeting browsers that
   * are included in the Baseline Widely Available on 2025-05-01.
   * (Chrome 107+, Edge 107+, Firefox 104+, Safari 16+).

```js twoslash
/** @type {import('vite').UserConfig} */
const config = {
  build: {
// ---cut-before---
   * @default 'baseline-widely-available'
modulePreload: {
  target?: 'baseline-widely-available' | TransformOptions['target'] | false
  resolveDependencies: (filename, deps, { hostId, hostType }) => {
    return deps.filter(condition)
  },
},
// ---cut-after---
  },
}
```

    "baseline-browser-mapping": "^2.3.0",

- **타입:** `string`
- **기본값:** `assets`


- **타입:** `number` | `((filePath: string, content: Buffer) => boolean | undefined)`
- **기본값:** `4096` (4KiB)

이 값보다 작은 크기로 import 되거나 참조된 에셋은 부가적인 http 요청을 피하고자 base64 URL로 인라인 처리됩니다. 만일 인라인 변환을 사용하지 않으려면 `0`으로 설정하세요.



::: tip 참고
`build.lib`를 지정하면 `build.assetsInlineLimit`는 무시되며 파일 크기나 Git LFS 자리 표시자와 관계없이 에셋이 항상 인라인 처리됩니다.
:::

## build.cssCodeSplit {#build-csscodesplit}
In this case, you need to set `build.cssTarget` to `chrome61` to prevent vite from transforming `rgba()` colors into `#RGBA` hexadecimal notations.
비활성화된 경우, 전체 프로젝트의 모든 CSS가 단일 CSS 파일로 추출됩니다.

::: tip 참고
만약 `build.lib`으로 지정하게 되면, `build.cssCodeSplit`이 기본적으로 `false`가 됩니다.
:::

## build.cssTarget {#build-csstarget}

- **타입:** `string | string[]`
- **기본값:** [`build.target`](#build-target)과 동일

이 옵션을 사용하면 CSS 축소 시 타깃이 되는 브라우저를 설정할 수 있습니다.
기존 Rollup 번들을 커스텀합니다. 이는 Rollup 설정 파일에서 내보낼 수 있는 옵션과 같으며 Vite의 내부 Rollup 옵션과 병합됩니다. 더 자세한 점은 [Rollup 옵션 문서](https://rollupjs.org/configuration-options/)를 참고하세요.

## build.commonjsOptions {#build-commonjsoptions}

- **타입:** [`RollupCommonJSOptions`](https://github.com/rollup/plugins/tree/master/packages/commonjs#options)

[@rollup/plugin-commonjs](https://github.com/rollup/plugins/tree/master/packages/commonjs)에 전달할 옵션입니다.
    },
  },
})
```

## build.manifest {#build-manifest}

- **타입:** `boolean | string`
- **기본값:** `false`
- **관련 항목:** [백엔드 프레임워크와 함께 사용하기](/guide/backend-integration)

해시되지 않은 에셋 파일 이름과 해시된 버전 간 매핑을 포함하는 매니패스트 파일을 생성할지 여부입니다. 이는 서버 프레임워크에서 올바른 에셋 링크를 렌더링하는 데 사용될 수 있습니다.

값이 문자열이면 `build.outDir`을 기준으로 하는 매니페스트 파일 경로로 사용됩니다. `true`면 `.vite/manifest.json`이 경로가 됩니다.

## build.ssrManifest {#build-ssrmanifest}

    resolved.lightningcss.targets ??= convertTargets(
      ESBUILD_BASELINE_WIDELY_AVAILABLE_TARGET,
    )
- **타입:** `boolean | string`
- **기본값:** `false`
- **관련 항목:** [서버 측 렌더링](/guide/ssr)

프로덕션 환경에서 필요한 스타일 링크 및 에셋 프리로드 디렉티브를 식별하는 데 사용되는 SSR 매니페스트 파일을 생성할지 여부입니다.

값이 문자열이면 `build.outDir`을 기준으로 하는 매니페스트 파일 경로로 사용됩니다. `true`면 `.vite/ssr-manifest.json`이 경로가 됩니다.

## build.ssr {#build-ssr}

- **타입:** `boolean | string`
- **기본값:** `false`
- **관련 항목:** [서버 측 렌더링](/guide/ssr)

서버 측 렌더링으로 빌드합니다. 설정 값은 SSR 항목을 직접 지정하는 문자열이거나, `rollupOptions.input`을 통해 SSR 항목을 지정해야 하는 `true`가 될 수 있습니다.

## build.emitAssets {#build-emitassets}

- **타입:** `boolean`
- **기본값:** `false`


## build.ssrEmitAssets {#build-ssremitassets}

- **타입:** `boolean`
- **기본값:** `false`

SSR 빌드 중에는 정적 에셋이 따로 생성되지 않는데, 이는 클라이언트 빌드의 일부에 포함될 것으로 간주하기 때문입니다. 다만 필요한 경우 이 옵션을 사용하여 클라이언트와 SSR 빌드 모두에서 에셋을 생성하도록 강제할 수 있습니다. 이 경우 프레임워크는 빌드 이후 단계에서 에셋을 병합하는 것이 필요합니다. 이 옵션은 환경 API가 안정화되면 `build.emitAssets`로 대체될 예정입니다.

## build.minify {#build-minify}

- **타입:** `boolean | 'terser' | 'esbuild'`
- **기본값:** 클라이언트 빌드에는 `'esbuild'`를, SSR 빌드에는 `false`를 사용

코드 경량화를 사용하지 않으려면 `false`로 설정하거나, 사용할 코드 경량화 도구를 지정하세요. 기본값은 [Esbuild](https://github.com/evanw/esbuild)로, Terser보다 20에서 40배가량 빠르며 압축률 또한 1 ~ 2%밖에 떨어지지 않습니다.

참고로 `build.minify` 옵션은 `'es'`를 사용하는 라이브러리 모드에서 공백을 축소화하지 않습니다. 이는 Pure 애노테이션(`@__PURE__`)을 제거하고, 또 트리 셰이킹을 제대로 동작하지 못하게 만들기 때문입니다.

`'terser'`로 설정할 경우, Terser를 설치해야 합니다.

```sh
npm add -D terser
```

## build.terserOptions {#build-terseroptions}

  .option(
    '--target <target>',
    `[string] transpile target (default: 'baseline-widely-available')`,
  )
- **타입:** `TerserOptions`

Terser로 전달할 추가적인 [경량화 옵션](https://terser.org/docs/api-reference#minify-options)입니다.

`maxWorkers: number` 옵션을 전달하여 생성할 최대 워커 수를 지정할 수도 있습니다. 기본값은 CPU 수에서 1을 뺀 값입니다.

## build.write {#build-write}

- **타입:** `boolean`
- **기본값:** `true`

번들을 생성할 때 디스크에 기록하지 않으려면 `false`로 설정하세요. 이것은 디스크에 쓰기 전에 번들의 추가 후처리가 필요한 [프로그래밍 방식 `build()` 호출](/guide/api-javascript#build)에서 주로 사용됩니다.

      baseline-browser-mapping:
        specifier: ^2.3.0
        version: 2.3.0
## build.emptyOutDir {#build-emptyoutdir}

- **타입:** `boolean`
- **기본값:** `outDir`이 `root` 안에 있다면 `true`

기본적으로 Vite는 `outDir`이 프로젝트 루트 내부에 있는 경우 빌드할 때 이 곳을 비웁니다. `outDir`가 루트 외부에 있으면 실수로 중요한 파일을 제거하지 않도록 경고 메시지가 표시됩니다. 경고를 표시하지 않도록 이 옵션을 명시적으로 설정할 수 있습니다. 명령 줄에서는 `--emptyOutDir`로 이를 사용할 수 있습니다.

## build.copyPublicDir {#build-copypublicdir}

- **타입:** `boolean`

기본적으로 Vite는 빌드할 때 `publicDir`에서 `outDir`로 파일을 복사합니다. 이를 비활성화하려면 `false`로 설정하세요.

## build.reportCompressedSize {#build-reportcompressedsize}

- **타입:** `boolean`
- **기본값:** `true`

gzip 압축 크기 리포트를 활성화/비활성화합니다. 큰 출력 파일을 압축하는 경우 속도가 느릴 수 있으므로, 이를 사용하지 않도록 설정하면 대규모 프로젝트의 빌드 성능이 향상될 수 있습니다.

## build.chunkSizeWarningLimit {#build-chunksizewarninglimit}

- **타입:** `number`
- **기본값:** `500`

경고를 표시할 청크 크기의 경계(단위: kB). [자바스크립트 크기 자체가 실행 시간과 관련이 있기 때문에](https://v8.dev/blog/cost-of-javascript-2019), 압축되지 않은 청크 크기를 기준으로 비교합니다.

## build.watch {#build-watch}

- **타입:** [`WatcherOptions`](https://rollupjs.org/configuration-options/#watch)`| null`
- **기본값:** `null`

Rollup 감시자를 사용하려면 `{}`로 설정하세요. 이는 대부분 빌드 전용 플러그인 또는 통합 프로세스를 포함하는 경우에 사용됩니다.

::: warning Windows Subsystem for Linux (WSL) 2 에서 Vite 사용하기

파일 시스템 변경사항 감시가 WSL2에서 동작하지 않는 경우가 있습니다.
자세한 사항은 [`server.watch`](./server-options.md#server-watch)를 참고해주세요.

:::
  target: 'baseline-widely-available',
  if (merged.target === 'baseline-widely-available') {
    merged.target = ESBUILD_BASELINE_WIDELY_AVAILABLE_TARGET
    target: ESBUILD_BASELINE_WIDELY_AVAILABLE_TARGET,
  '@mdn/browser-compat-data@6.0.12':
    resolution: {integrity: sha512-lQ6p212jKeJBG+L7UYRKchTCcnQbp6yOj5swKxGLjvuW4SmbgWgd/WyA1Dxq1GGT86C7jVTEaKry36LmsBp8SQ==}

  baseline-browser-mapping@2.3.0:
    resolution: {integrity: sha512-K6nnZh0g0B/ZxbHSjZfKuJK7q1wto+RBqmVk9u/G+/YSOVlVXls71j2Jbl25Dos6j4HPAtne0MYdXdNOOSJm5g==}

  web-features@2.34.2:
    resolution: {integrity: sha512-OhPNkoNZYxfykP82LwJmpAXZHiO6eojkj9ZgDKB/u16i1rtoSZSzdgXjjTZI/gtTpZo5nuZNyDAZcNESJNylDg==}

  '@mdn/browser-compat-data@6.0.12': {}

  baseline-browser-mapping@2.3.0:
    dependencies:
      '@mdn/browser-compat-data': 6.0.12
      web-features: 2.34.2

  web-features@2.34.2: {}
